<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Nasuka Shop</title>

<style>
body {
  margin: 0;
  font-family: sans-serif;
  background-color: white;
  color: black;
}
.hero-section {
  position: relative;
  height: 15vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.hero-section video {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
}

.info, .sidebar {
  position: absolute;
  bottom: 20px;
}

.info {
  left: 10px;
}

.info .location {
  font-size: 12px;
  color: #333;
}

.info .username {
  font-weight: bold;
}

.info .adress {
  font-size: 14px;
  margin-top: 5px;
}

.info .balance {
  font-size: 12px;
  color: #ffbb00;
}

.sidebar {
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.sidebar div {
  margin: 8px 0;
  font-size: 12px;
}

.bottom-bar {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: transparent);
  display: flex;
  justify-content: space-around;
  padding: 8px 0;
  font-size: 12px;
  z-index: 999;
}

.bottom-bar a {
  color: white;
  text-decoration: none;
  text-align: center;
}

.product-container {
  display: grid;
  grid-template-columns: repeat(3, 1fr); 
  gap: 15px; 
  padding: 20px 10px;
}

.product-item {
  text-align: center;
  padding: 10px;
}

.product-item img {
  width: 100%;
  height: auto;
}

.product-name {
  font-weight: bold;
  margin-top: 10px;
}

.product-price {
  color: #333;
  margin-top: 5px;
}

.buy-button {
  background-color: #ffbb00;
  color: white;
  border: none;
  padding: 8px 15px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 14px;
  margin-top: 10px;
  cursor: pointer;
  border-radius: 5px;
}

.profile-section, .payment-section {
  padding: 20px;
  max-width: 600px;
  margin: 20px auto;
  border-radius: 8px;
  background-color: #f9f9f9;
}

.modal-overlay {
  display: none; 
  position: fixed; 
  z-index: 1000; 
  left: 0;
  top: 0;
  width: 100%; 
  height: 100%; 
  background-color: rgba(0,0,0,0.5); 
  overflow: auto;
  justify-content: center;
  align-items: center;
}

#profileSection, #loginSection, #registerSection {
  background-color: #fefefe;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
  max-width: 90%;
  width: 400px; 
}

.close-button {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close-button:hover,
.close-button:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

.payment-section {
  display: none;
}

.profile-section h2, .payment-section h2, #loginSection h2, #registerSection h2 {
  text-align: center;
  margin-bottom: 20px;
}

.profile-form label, .payment-form label, .login-form label, .register-form label {
  display: block;
  margin-bottom: 5px;
  font-weight: bold;
}

.profile-form input, .payment-form input, .payment-form select, .login-form input, .register-form input {
  width: 100%;
  padding: 8px;
  margin-bottom: 10px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

.profile-form button, .payment-form button, .login-form button, .register-form button {
  width: 100%;
  padding: 10px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.profile-form button:hover, .payment-form button:hover, .login-form button:hover, .register-form button:hover {
  background-color: #45a049;
}

.order-details {
    margin-bottom: 15px;
    padding: 10px;
    background-color: #eee;
    border-radius: 5px;
}

.order-details p {
    margin: 5px 0;
}
</style>

<body>
<section class="hero-section">
<div class="info">
<div class="location">üìç Jawa Barat</div>
<div class="username">#</div>
<div class="adress">Kota</div>
<div class="balance">Saldo</div>
</div>
<div class="sidebar">
  <div>‚ù§Ô∏è 200.k</div>
  <div>üí¨ 4.M</div>
  <div>üõí</div>
</div>

</section>
<div class="product-container">
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 1">
<div class="product-name">Produk 1</div>
<div class="product-price" data-price="10000">Rp 10.000</div>
<button class="buy-button" data-product="Produk 1">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 2">
<div class="product-name">Produk 2</div>
<div class="product-price" data-price="5000">Rp 5.000</div>
<button class="buy-button" data-product="Produk 2">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 3">
<div class="product-name">Produk 3</div>
<div class="product-price" data-price="15000">Rp 15.000</div>
<button class="buy-button" data-product="Produk 3">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 4">
<div class="product-name">Produk 4</div>
<div class="product-price" data-price="20000">Rp 20.000</div>
<button class="buy-button" data-product="Produk 4">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 5">
<div class="product-name">Produk 5</div>
<div class="product-price" data-price="25000">Rp 25.000</div>
<button class="buy-button" data-product="Produk 5">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 6">
<div class="product-name">Produk 6</div>
<div class="product-price" data-price="30000">Rp 30.000</div>
<button class="buy-button" data-product="Produk 6">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 7">
<div class="product-name">Produk 7</div>
<div class="product-price" data-price="35000">Rp 35.000</div>
<button class="buy-button" data-product="Produk 7">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 8">
<div class="product-name">Produk 8</div>
<div class="product-price" data-price="40000">Rp 40.000</div>
<button class="buy-button" data-product="Produk 8">Beli Sekarang</button>
</div>
<div class="product-item">
<img src="https://nasukafoods.site/wireless.jpg" alt="Produk 9">
<div class="product-name">Produk 9</div>
<div class="product-price" data-price="45000">Rp 45.000</div>
<button class="buy-button" data-product="Produk 9">Beli Sekarang</button>
</div>
</div>

<div id="profileModal" class="modal-overlay">
  <div id="profileSection" class="profile-section">
    <span class="close-button" id="closeProfileModal">&times;</span>
    <h2>Data Diri Pengunjung</h2>
    <form id="profileForm" class="profile-form">
      <label for="namaLengkap">Nama Lengkap:</label>
      <input type="text" id="namaLengkap" required>

      <label for="alamatLengkap">Alamat Lengkap:</label>
      <input type="text" id="alamatLengkap" required>

      <label for="nomorHP">Nomor HP:</label>
      <input type="tel" id="nomorHP" required>
      
      <label for="sosialMedia">Sosial Media:</label>
      <input type="text" id="sosialMedia" value="Akun tiktok (Misal : @supria-jaya)">

      <label for="fhoto">Fhoto:</label>
      <input type="file" id="fhoto" accept="image/*">

      <label for="kataKataHariIni">Kata Kata Hari Ini:</label>
      <input type="text" id="kataKataHariIni">

      <button type="submit" id="simpanDataButton">Simpan Data Diri</button>
    </form>
    <div id="statusMessage"></div>
  </div>
</div>

<div id="loginModal" class="modal-overlay">
  <div id="loginSection" class="profile-section">
    <span class="close-button" id="closeLoginModal">&times;</span>
    <h2>Login Pengunjung</h2>
    <form id="loginForm" class="login-form">
      <label for="loginUsername">Username:</label>
      <input type="text" id="loginUsername" required>

      <label for="loginPassword">Password:</label>
      <input type="password" id="loginPassword" required>

      <button type="submit">Login</button>
    </form>
    <p>belum punya akun? bikin akun <a href="#" id="registerLink">Disini</a> untuk pengalaman lebih asik</p>
  </div>
</div>

<div id="registerModal" class="modal-overlay">
  <div id="registerSection" class="profile-section">
    <span class="close-button" id="closeRegisterModal">&times;</span>
    <h2>Pendaftaran Akun</h2>
    <form id="registerForm" class="register-form">
      <label for="regUsername">Username:</label>
      <input type="text" id="regUsername" required>

      <label for="regPassword">Password:</label>
      <input type="password" id="regPassword" required>
      
      <label for="regNamaLengkap">Nama Lengkap:</label>
      <input type="text" id="regNamaLengkap" required>

      <label for="regAlamatLengkap">Alamat Lengkap:</label>
      <input type="text" id="regAlamatLengkap" required>

      <label for="regNomorHP">Nomor HP:</label>
      <input type="tel" id="regNomorHP" required>

      <label for="regFotoProfil">Foto Profil:</label>
      <input type="file" id="regFotoProfil" accept="image/*">

      <label for="regTentangSaya">Tentang Saya:</label>
      <input type="text" id="regTentangSaya">

      <button type="submit">Daftar</button>
    </form>
  </div>
</div>

<div id="paymentSection" class="payment-section">
  <h2>Form Pembayaran</h2>
  <div class="order-details">
    <p><strong>Produk:</strong> <span id="paymentProductName"></span></p>
    <p><strong>Harga:</strong> <span id="paymentProductPrice"></span></p>
    <p><strong>Kuantitas:</strong> <span id="paymentQuantity">1</span></p> 
    <p><strong>Total Harga:</strong> <span id="paymentTotal"></span></p> 
    <p><strong>Nama:</strong> <span id="paymentName"></span></p>
    <p><strong>Alamat:</strong> <span id="paymentAddress"></span></p>
    <p><strong>Nomor HP:</strong> <span id="paymentPhone"></span></p>
    <p><strong>Sosial Media:</strong> <span id="paymentSocialMedia"></span></p> 
  </div>
  
  <form id="paymentForm" class="payment-form">
    <label for="kuantitasInput">Kuantitas:</label>
    <input type="number" id="kuantitasInput" min="1" value="1" required>

    <label for="metodePembayaran">Metode Pembayaran:</label>
    <select id="metodePembayaran" required>
      <option value="">Pilih Metode Pembayaran</option>
      <option value="Transfer Bank">Transfer Bank</option>
      <option value="Qris">Qris</option>
      <option value="Tunai">Tunai</option>
    </select>

    <label for="buktiPembayaran">Bukti Pembayaran:</label>
    <input type="file" id="buktiPembayaran" accept="image/*">

    <label for="catatan">Catatan (opsional):</label>
    <input type="text" id="catatan">

    <button type="submit">Lanjutkan Pembayaran</button>
  </form>
</div>

<div class="bottom-bar">
<a href="https://nasukafoods.site">üè†<br>Home</a>
<a href="#" id="loginNav">‚úÖ<br>Layn</a>
<a href="https://nasukafoods.site">‚ûï<br>Pes</a>
<a href="https://nasukafoods.site">üì®<br>Otf</a>
<a href="#" id="profileNav">üë§<br>Profil</a>
</div>

<script>
const GAS_URL = 'https://script.google.com/macros/s/AKfycbx5KBwWoK59Ppp6bfo49QSmzUhwJH1QuYJ-xAHBytGvBGgJDun0tuixzBwq3Nt4bfWF3w/exec';

document.getElementById('profileForm').addEventListener('submit', async function(event) {
    event.preventDefault();
    
    const namaLengkap = document.getElementById('namaLengkap').value;
    const alamatLengkap = document.getElementById('alamatLengkap').value;
    const nomorHP = document.getElementById('nomorHP').value;
    const sosialMedia = document.getElementById('sosialMedia').value;
    const kataKataHariIni = document.getElementById('kataKataHariIni').value;
    const statusMessage = document.getElementById('statusMessage');
    
    if (typeof(Storage) !== "undefined") {
      localStorage.setItem('visitorData_namaLengkap', namaLengkap);
      localStorage.setItem('visitorData_alamatLengkap', alamatLengkap);
      localStorage.setItem('visitorData_nomorHP', nomorHP);
      localStorage.setItem('visitorData_sosialMedia', sosialMedia);
      localStorage.setItem('visitorData_kataKataHariIni', kataKataHariIni);
    }

    const now = new Date();
    const tanggalDaftar = now.toLocaleString();
    
    const formData = {
      action: 'addCustomer', 
      'Nama Lengkap': namaLengkap,
      'Alamat Lengkap': alamatLengkap,
      'Nomor HP': nomorHP,
      'Sosial Media': sosialMedia,
      'Tanggal Daftar': tanggalDaftar,
      'Kata Kata Hari Ini': kataKataHariIni 
    };

    const urlParams = new URLSearchParams(formData);

    statusMessage.textContent = 'Mengirim data...';
    statusMessage.style.color = 'blue';

    try {
      const response = await fetch(GAS_URL, {
        method: 'POST',
        body: urlParams
      });

      if (response.ok) {
        statusMessage.textContent = 'Data berhasil disimpan lokal dan dikirim ke sheet!';
        statusMessage.style.color = 'green';
      } else {
        statusMessage.textContent = 'Data disimpan lokal, tetapi gagal mengirim ke sheet.';
        statusMessage.style.color = 'orange';
      }
    } catch (error) {
      statusMessage.textContent = 'Data disimpan lokal, tetapi terjadi kesalahan saat mengirim ke sheet.';
      statusMessage.style.color = 'red';
    }
  });

function loadVisitorData() {
    if (typeof(Storage) !== "undefined") {
      const namaLengkap = localStorage.getItem('visitorData_namaLengkap');
      const alamatLengkap = localStorage.getItem('visitorData_alamatLengkap');
      const nomorHP = localStorage.getItem('visitorData_nomorHP');
      const sosialMedia = localStorage.getItem('visitorData_sosialMedia');
      const kataKataHariIni = localStorage.getItem('visitorData_kataKataHariIni');

      if (namaLengkap) {
        document.getElementById('namaLengkap').value = namaLengkap;
      }
      if (alamatLengkap) {
        document.getElementById('alamatLengkap').value = alamatLengkap;
      }
      if (nomorHP) {
        document.getElementById('nomorHP').value = nomorHP;
      }
      if (sosialMedia) {
        document.getElementById('sosialMedia').value = sosialMedia;
      }
      if (kataKataHariIni) {
        document.getElementById('kataKataHariIni').value = kataKataHariIni;
      }
      
      return { namaLengkap, alamatLengkap, nomorHP, sosialMedia, kataKataHariIni };
    }
    return {};
  }
  
const profileModal = document.getElementById('profileModal');
const profileNav = document.getElementById('profileNav');
const closeProfileModal = document.getElementById('closeProfileModal');
const paymentSection = document.getElementById('paymentSection');
const loginModal = document.getElementById('loginModal');
const registerModal = document.getElementById('registerModal');
const loginNav = document.getElementById('loginNav');
const closeLoginModal = document.getElementById('closeLoginModal');
const registerLink = document.getElementById('registerLink');
const closeRegisterModal = document.getElementById('closeRegisterModal');

profileNav.addEventListener('click', function(event) {
    event.preventDefault(); 
    
    paymentSection.style.display = 'none';
    loginModal.style.display = 'none';
    registerModal.style.display = 'none';

    profileModal.style.display = 'flex'; 
    loadVisitorData(); 
});

closeProfileModal.addEventListener('click', function() {
    profileModal.style.display = 'none';
});

loginNav.addEventListener('click', function(event) {
    event.preventDefault();
    
    paymentSection.style.display = 'none';
    profileModal.style.display = 'none';
    registerModal.style.display = 'none';
    
    loginModal.style.display = 'flex';
});

closeLoginModal.addEventListener('click', function() {
    loginModal.style.display = 'none';
});

registerLink.addEventListener('click', function(event) {
    event.preventDefault();
    loginModal.style.display = 'none';
    registerModal.style.display = 'flex';
});

closeRegisterModal.addEventListener('click', function() {
    registerModal.style.display = 'none';
});

window.addEventListener('click', function(event) {
    if (event.target == profileModal) {
      profileModal.style.display = 'none';
    }
    if (event.target == loginModal) {
      loginModal.style.display = 'none';
    }
    if (event.target == registerModal) {
      registerModal.style.display = 'none';
    }
});

const buyButtons = document.querySelectorAll('.buy-button');
const kuantitasInput = document.getElementById('kuantitasInput');

kuantitasInput.addEventListener('input', updatePaymentDetails);

let currentProductPrice = 0; // Variable to store the price of the current product

function updatePaymentDetails() {
    const quantity = parseInt(kuantitasInput.value) || 0;
    
    // Calculate total price using the stored base price
    const total = currentProductPrice * quantity;

    document.getElementById('paymentQuantity').textContent = quantity;
    document.getElementById('paymentTotal').textContent = `Rp ${total.toLocaleString('id-ID')}`;
}

buyButtons.forEach(button => {
    button.addEventListener('click', function(event) {
      event.preventDefault();

      profileModal.style.display = 'none';
      loginModal.style.display = 'none';
      registerModal.style.display = 'none';
      
      const productItem = this.closest('.product-item');
      const productName = productItem.querySelector('.product-name').textContent;
      const productPriceText = productItem.querySelector('.product-price').textContent;
      
      // Extract numeric price from data-price attribute and store it
      currentProductPrice = parseInt(productItem.querySelector('.product-price').dataset.price);

      const visitorData = loadVisitorData();

      // Populate payment form details
      document.getElementById('paymentProductName').textContent = productName;
      document.getElementById('paymentProductPrice').textContent = productPriceText;
      document.getElementById('paymentName').textContent = visitorData.namaLengkap || 'Belum diisi';
      document.getElementById('paymentAddress').textContent = visitorData.alamatLengkap || 'Belum diisi';
      document.getElementById('paymentPhone').textContent = visitorData.nomorHP || 'Belum diisi';
      document.getElementById('paymentSocialMedia').textContent = visitorData.sosialMedia || 'Belum diisi';

      // Reset quantity input to 1 and update total price
      kuantitasInput.value = 1;
      updatePaymentDetails(); 

      // Show payment section
      paymentSection.style.display = 'block';
    });
});

document.addEventListener('DOMContentLoaded', loadVisitorData);
</script>
</body>
</html>

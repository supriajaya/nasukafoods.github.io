<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Nasuka.apk</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      color: white;
      background-color: black;
    }

    .top-bar {
      position: fixed;
      top: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      font-size: 12px;
      z-index: 999;
      background-color: rgba(0, 0, 0, 0.8);
    }

    .top-bar a {
      color: white;
      text-decoration: none;
      text-align: center;
    }

    .hero-section {
      position: relative;
      height: 20vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .hero-section video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: 0;
    }

    .promo-text,
    .info,
    .sidebar {
     position: relative;
     z-index: 1;
    }

    .promo-text {
      text-align: center;
      margin-top: 5vh;
      font-size: 24px;
      font-weight: bold;
      padding: 0 20px;
    }

    .info, .sidebar {
      position: absolute;
      bottom: 20px;
    }

    .info {
      left: 10px;
    }

    .info .location {
      font-size: 12px;
      color: #ccc;
    }

    .info .username {
      font-weight: bold;
    }

    .info .desc {
      font-size: 14px;
      margin-top: 5px;
    }

    .info .music {
      font-size: 12px;
      color: #ffbb00;
    }

    .sidebar {
      right: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .sidebar div {
      margin: 8px 0;
      font-size: 12px;
    }

    /* Product Section Styles */
    .product-list {
      display: flex;
      flex-wrap: nowrap;
      overflow-x: auto;
      padding: 10px;
      gap: 15px;
      margin-top: 10px;
    }

    .product-card {
      min-width: 75px; 
      text-align: center;
      color: white;
      text-decoration: none;
      display: flex;
      flex-direction: column;
      align-items: center;
      cursor: pointer;
    }

    .product-image-container {
      width: 75px; 
      height: 75px;
      overflow: hidden;
    }

    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .product-title {
      font-size: 10px; 
      margin-top: 4px;
    }

    .product-price {
      font-weight: bold;
      font-size: 9px;
      margin-top: 2px;
      color: #ffbb00;
    }
  </style>
</head>

<body>

  <div class="top-bar" id="top-bar-links">
    </div>

  <section class="hero-section">
    <video src="https://nasukafoods.site/kawasakih2.mp4" autoplay muted loop playsinline></video>
    <div class="info">
      <div class="location">Jawa Barat</div>
      <div class="username" id="user-greeting">Proyek Apk</div>
      <div class="desc">Pembangunan aplikasi</div>
      <div class="music">üéµ Nasuka Labs</div>
    </div>
    <div class="sidebar">
      <div>‚ù§Ô∏è 200.k</div>
      <div>üí¨ 4.M</div>
      <div>üîó Share</div>
    </div>
  </section>

  <div class="product-list">
    <a onclick="addToCart(this)" class="product-card">
      <div class="product-image-container">
        <img class="product-image" src="https://nasukafoods.site/wireless.jpg" alt="Produk 1">
      </div>
      <div class="product-title">Produk 1</div>
      <div class="product-price">Rp 50.000</div>
    </a>
    <a onclick="addToCart(this)" class="product-card">
      <div class="product-image-container">
        <img class="product-image" src="https://nasukafoods.site/wireless.jpg" alt="Produk 2">
      </div>
      <div class="product-title">Produk 2</div>
      <div class="product-price">Rp 75.000</div>
    </a>
    <a onclick="addToCart(this)" class="product-card">
      <div class="product-image-container">
        <img class="product-image" src="https://nasukafoods.site/wireless.jpg" alt="Produk 3">
      </div>
      <div class="product-title">Produk 3</div>
      <div class="product-price">Rp 120.000</div>
    </a>
    <a onclick="addToCart(this)" class="product-card">
      <div class="product-image-container">
        <img class="product-image" src="https://nasukafoods.site/wireless.jpg" alt="Produk 4">
      </div>
      <div class="product-title">Produk 4</div>
      <div class="product-price">Rp 45.000</div>
    </a>
  </div>

  <script>
    function addToCart(element) {
      // Extract product data
      const title = element.querySelector('.product-title').innerText;
      const price = element.querySelector('.product-price').innerText;
      const img = element.querySelector('.product-image').src;
      
      const product = { 
          name: title, 
          price: price, 
          image: img,
          quantity: 1 
      };

      // Retrieve existing cart data or initialize as an empty array
      let cart = JSON.parse(localStorage.getItem('cart')) || [];

      // Add the new product to the cart array
      cart.push(product);

      // Save the updated cart array back to localStorage
      localStorage.setItem('cart', JSON.stringify(cart));
    }

    function updateUIBasedOnLoginStatus() {
        const isLoggedIn = localStorage.getItem('userLoggedIn') === 'true';
        const userData = localStorage.getItem('userData');
        const topBarLinks = document.getElementById('top-bar-links');
        const userGreeting = document.getElementById('user-greeting');

        let linksHTML = '';

        if (isLoggedIn && userData) {
            try {
                const user = JSON.parse(userData);
                
                // Update username in hero section
                if (user['Nama Lengkap']) {
                    userGreeting.textContent = user['Nama Lengkap'];
                } else if (user['Username']) {
                    userGreeting.textContent = user['Username'];
                }

                // Logged in links (Home, Topup, Logout, Keranjang)
                linksHTML = `
                    <a href="index.html">üè†<br>Home</a>
                    <a href="topup.html">üí∞<br>Topup</a>
                    <a href="#" onclick="logout()">üèÉ<br>Logout</a>
                    <a href="keranjang.html">üõí <br>Keranjang</a>
                `;
            } catch (e) {
                // If user data is corrupted, treat as logged out
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('userData');
                updateUIBasedOnLoginStatus(); 
                return;
            }
        } else {
            // Guest/Non-member links (Home, Login, Daftar, Keranjang)
            userGreeting.textContent = 'Proyek Apk'; 
            linksHTML = `
                <a href="index.html">üè†<br>Home</a>
                <a href="https:nasukafoods.site/login.html">üì•<br>Login</a>
                <a href="daftar.html">üìù<br>Daftar</a>
                <a href="keranjang-non-member.html">üõí <br>Keranjang</a>
            `;
        }

        topBarLinks.innerHTML = linksHTML;
    }

    function logout() {
        localStorage.removeItem('userLoggedIn');
        localStorage.removeItem('userData');
        // Redirect to force UI update
        window.location.href = 'index.html'; 
    }

    document.addEventListener('DOMContentLoaded', updateUIBasedOnLoginStatus);
  </script>

</body>
</html>
